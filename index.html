<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucky Numbers</title>
    <!-- Use Inter font from Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <!-- Tailwind CSS for modern styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* General body styling with a soft, clean theme */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Soft light gray-blue background */
            color: #2c3e50; /* Dark blue-gray text */
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }

        /* Hide scrollbars for both WebKit (Chrome, Safari) and Firefox */
        body::-webkit-scrollbar {
            display: none;
        }
        body {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        .overflow-y-auto::-webkit-scrollbar {
            display: none;
        }
        .overflow-y-auto {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        /* Container for the numbers to appear */
        .numbers-container {
            display: none; /* Initially hidden */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            border-radius: 20px;
            background-color: #ffcccc; /* Soft red for the display box */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease-in-out;
            margin-top: 20px;
        }

        /* Active state to show the container */
        .numbers-container.active {
            display: flex;
        }

        /* Fade-in animation for the container */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Styling for the numbers inside the container */
        .sub-numbers {
            font-size: 32px;
            font-weight: bold;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            color: #c0392b; /* A darker red for numbers */
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* New flashing animation for the numbers */
        .flashing-number {
            animation: flash-animation 1.5s infinite alternate;
        }

        @keyframes flash-animation {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        /* History table styling */
        .history-table th, .history-table td {
            padding: 10px 0;
            border-bottom: 1px solid #dcdcdc; /* Light gray border */
        }
        .history-table tbody tr:last-child td {
            border-bottom: none;
        }
        
        /* New styling for the winning digit */
        .highlighted-digit {
            color: #ffbf00; /* Bright gold color */
            font-size: 1.2em; /* Slightly larger font size */
        }

        /* New styling for the YouTube button, now smaller and transparent */
        .social-button {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            background-color: transparent; /* Changed to transparent */
            padding: 0.5rem; /* Reduced padding */
            border-radius: 1rem;
            box-shadow: none; /* Removed shadow for a lighter look */
            transition: all 0.3s ease-in-out;
            transform: scale(1);
        }
        .social-button:hover {
            background-color: transparent; /* Also transparent on hover */
            transform: scale(1.05);
        }
        .social-button:active {
            transform: scale(0.98);
        }

        /* Adjust icon and text size for the smaller button */
        .social-button .social-icon {
            font-size: 2rem; /* Smaller icon size */
        }
        .social-button .mt-1 {
            font-size: 0.75rem; /* Smaller text size */
            margin-top: 0.25rem;
        }

        /* Styling for the calendar button */
        .calendar-button {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
            background-color: transparent;
            border-radius: 9999px; /* Make it a circle */
            color: #2c3e50; /* Dark blue-gray */
            transition: transform 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }

        .calendar-button:hover {
            transform: scale(1.1);
            background-color: rgba(0, 0, 0, 0.05);
        }

        /* New shining animation for a specific digit */
        .shining-digit {
            animation: shine 1.5s infinite;
        }

        @keyframes shine {
            0% { color: #ffbf00; text-shadow: 0 0 5px #ffbf00; }
            50% { color: #ffffa0; text-shadow: 0 0 10px #ffffa0; }
            100% { color: #ffbf00; text-shadow: 0 0 5px #ffbf00; }
        }
        
        /* New styles for the results container */
        .results-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            position: relative; /* Needed for absolute positioning of the result */
        }
        
        /* Styles for each result row */
        .results-row {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
        }

        /* Styles for the number group on the left */
        .number-group {
            display: flex;
            flex-direction: row;
            gap: 0.5rem;
        }
        
        /* Styles for the result group on the right */
        .result-group {
            position: absolute;
            right: 1rem; /* Adjust as needed */
            transition: top 0.3s ease-in-out;
        }
        
        /* Styles for the digits selected for calculation */
        .selected-digit {
            background-color: #ffeb3b; /* A yellow highlight for selected digits */
            border-radius: 5px;
            padding: 0 2px;
            animation: highlight-pulse 0.5s infinite alternate;
        }
        /* Animation for the highlight effect */
        @keyframes highlight-pulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.05); opacity: 0.8; }
        }

        /* Styles for the new cute calculator buttons */
        .calculator-buttons-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            background-color: #ffffff;
            border-radius: 1.5rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
            z-index: 100;
        }

        .cute-button {
            width: 45px;
            height: 45px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.25rem;
            font-weight: bold;
            border-radius: 100%; /* Make them perfectly round */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            color: #fff;
        }

        .cute-button:hover {
            transform: scale(1.1);
        }

        .cute-button:active {
            transform: scale(0.95);
        }
        
        /* Specific button colors */
        .button-plus { background-color: #48bb78; }
        .button-minus { background-color: #ed8936; }
        .button-multiply { background-color: #4299e1; } /* Blue color for multiply */
        .button-divide { background-color: #9f7aea; } /* Purple color for divide */
        .button-equals { background-color: #4c51bf; }
        .button-clear { background-color: #e53e3e; }
        .button-back { background-color: #9ca3af; } /* Gray color for back button */


        /* Styles for the dynamically added result element */
        .result-number {
            background-color: #fff59d; /* Soft yellow highlight */
            padding: 0.5rem 1rem;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-size: 2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
    </style>
</head>
<body class="p-4 sm:p-8 relative">

    <!-- Main Container -->
    <div class="flex flex-col items-center w-full max-w-7xl mx-auto gap-4">
        
        <!-- Calendar Button -->
        <button id="calendar-btn" class="calendar-button">
            <i class="far fa-calendar-alt text-2xl sm:text-3xl"></i>
        </button>

        <!-- Main Lucky Numbers View -->
        <div id="lucky-numbers-view" class="w-full flex flex-col items-center gap-4">
            
            <!-- Header Section -->
            <div class="text-center mb-4">
                <div class="text-3xl font-bold mb-2">Date - <span id="current-date"></span></div>
                <div class="text-xl font-medium text-gray-600">တစ်နေကုန်စာ</div>
            </div>

            <!-- Button Grid for the number categories -->
            <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 w-full">
                <button class="button-block bg-pink-100 hover:bg-pink-200 text-orange-600 p-4 rounded-2xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-98" data-target="mwe-ga-nan">
                    <span class="text-3xl">🍀</span>
                    <span class="text-base font-bold mt-1">မွေးဂဏန်း</span>
                </button>
                <button class="button-block bg-pink-100 hover:bg-pink-200 text-orange-600 p-4 rounded-2xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-98" data-target="one-kwet">
                    <span class="text-3xl">🎯</span>
                    <span class="text-base font-bold mt-1">တစ်ကွက်ကောင်း</span>
                </button>
                <button class="button-block bg-pink-100 hover:bg-pink-200 text-orange-600 p-4 rounded-2xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-98" data-target="shwe-pat-tee">
                    <span class="text-3xl">💰</span>
                    <span class="text-base font-bold mt-1">ရွှေပတ်သီး</span>
                </button>
                <button class="button-block bg-pink-100 hover:bg-pink-200 text-orange-600 p-4 rounded-2xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-98" data-target="not-broken">
                    <span class="text-3xl">🔑</span>
                    <span class="text-base font-bold mt-1">မထိမပေါက်ကီး</span>
                </button>
                <button class="button-block bg-pink-100 hover:bg-pink-200 text-orange-600 p-4 rounded-2xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-98" data-target="one-chain">
                    <span class="text-3xl">⛓️</span>
                    <span class="text-base font-bold mt-1">ဝမ်းချိန်း</span>
                </button>
                <button class="button-block bg-pink-100 hover:bg-pink-200 text-orange-600 p-4 rounded-2xl shadow-md transition-all duration-300 transform hover:scale-105 active:scale-98" data-target="punch">
                    <span class="text-3xl">💥</span>
                    <span class="text-base font-bold mt-1">ထိုးကွက်</span>
                </button>
                <!-- YouTube Channel Button -->
                <a href="https://youtube.com/@2dshwepattee?si=KYIfOzw5lLajvCvE" target="_blank" class="social-button text-red-600" rel="noopener noreferrer">
                    <i class="fab fa-youtube social-icon"></i>
                    <span class="text-red-600 mt-1">YouTube Channel</span>
                </a>
                <!-- Facebook Page Button -->
                <a href="https://www.facebook.com/2dshwepattee" target="_blank" class="social-button text-blue-600" rel="noopener noreferrer">
                    <i class="fab fa-facebook-f social-icon"></i>
                    <span class="text-blue-600 mt-1">Facebook Page</span>
                </a>
            </div>
            
            <!-- Result Display Container (Initially Hidden) -->
            <div id="result-container" class="numbers-container">
                <h2 class="text-3xl font-bold mb-4">အောက်ပါအတိုင်းလာပါမည်</h2>
                <div id="result-numbers" class="sub-numbers"></div>
            </div>

            <!-- New Previous Results Section -->
            <div id="previous-results-container" class="mt-4 text-xl font-bold text-gray-800">
                <p>2607</p>
                <p>5216</p>
            </div>
            
            <!-- 2D Results History Table -->
            <div id="history-container" class="mt-8 w-full max-w-sm sm:max-w-md mx-auto overflow-y-auto max-h-96">
                <h3 class="text-2xl font-bold mb-4 text-center text-gray-700">2D Results History</h3>
                <table class="history-table w-full text-center border-collapse">
                    <thead class="bg-gray-200 sticky top-0">
                        <tr>
                            <th class="py-2 text-lg text-gray-700">Date</th>
                            <th class="py-2 text-lg text-gray-700">AM</th>
                            <th class="py-2 text-lg text-gray-700">PM</th>
                        </tr>
                    </thead>
                    <tbody id="history-table-body">
                        <!-- History will be populated here by JavaScript -->
                        <!-- New entry for today's date -->
                        <tr>
                            <td>2025-09-08</td>
                            <td>52</td>
                            <td>1<span class="shining-digit highlighted-digit">6</span></td>
                        </tr>
                        <tr>
                            <td>2025-09-07</td>
                            <td>04</td>
                            <td>93</td>
                        </tr>
                        <tr>
                            <td>2025-09-06</td>
                            <td>68</td>
                            <td>27</td>
                        </tr>
                        <tr>
                            <td>2025-09-05</td>
                            <td>45</td>
                            <td>72</td>
                        </tr>
                        <tr>
                            <td>2025-09-04</td>
                            <td>31</td>
                            <td>59</td>
                        </tr>
                        <tr>
                            <td>2025-09-03</td>
                            <td>80</td>
                            <td>14</td>
                        </tr>
                        <tr>
                            <td>2025-09-02</td>
                            <td>23</td>
                            <td>46</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Calendar View -->
        <div id="calendar-view" class="w-full flex-col items-center gap-4 hidden">
            <h2 class="text-3xl font-bold mb-4 text-gray-800">Choose a Date</h2>
            <input type="date" id="date-picker" class="p-2 border border-gray-400 rounded-lg text-lg">
            <button id="show-results-btn" class="bg-blue-500 text-white font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-200 hover:bg-blue-600 mt-4">Show Results</button>

            <!-- Dynamic content for calendar results -->
            <div id="calendar-results" class="mt-6 text-2xl font-semibold text-gray-700"></div>

            <!-- Back to Main Button -->
            <button id="back-to-main-btn" class="bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg shadow-md transition-all duration-200 hover:bg-gray-400 mt-4">Back to Main</button>
        </div>

        <!-- Calculator Panel -->
        <div id="calculator-panel" class="calculator-buttons-container hidden">
            <button id="calc-plus" class="cute-button button-plus">+</button>
            <button id="calc-minus" class="cute-button button-minus">-</button>
            <button id="calc-multiply" class="cute-button button-multiply">×</button>
            <button id="calc-divide" class="cute-button button-divide">÷</button>
            <button id="calc-equals" class="cute-button button-equals">=</button>
            <button id="calc-back" class="cute-button button-back">←</button>
            <button id="calc-clear" class="cute-button button-clear">C</button>
        </div>
    </div>

    <!-- The overlay and modal for the number display -->
    <div id="modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 hidden">
        <div class="relative bg-white p-6 rounded-lg shadow-2xl w-full max-w-sm sm:max-w-md text-center">
            <button id="close-modal" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            <h3 class="text-2xl font-bold mb-4 text-gray-800">အောက်ပါအတိုင်းလာပါမည်</h3>
            <div id="modal-numbers" class="sub-numbers mb-4"></div>
            <p class="text-lg text-gray-600 mt-2">ဒီဂဏန်းတွေထဲကနေ ကြိုက်တာကို ရွေးပါ</p>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const currentDateElement = document.getElementById('current-date');
            const resultContainer = document.getElementById('result-container');
            const resultNumbers = document.getElementById('result-numbers');
            const modalOverlay = document.getElementById('modal-overlay');
            const modalNumbers = document.getElementById('modal-numbers');
            const closeModalBtn = document.getElementById('close-modal');
            const luckyNumbersView = document.getElementById('lucky-numbers-view');
            const calendarView = document.getElementById('calendar-view');
            const calendarBtn = document.getElementById('calendar-btn');
            const backToMainBtn = document.getElementById('back-to-main-btn');
            const datePicker = document.getElementById('date-picker');
            const showResultsBtn = document.getElementById('show-results-btn');
            const calendarResults = document.getElementById('calendar-results');
            const calculatorPanel = document.getElementById('calculator-panel');
            const historyTableBody = document.getElementById('history-table-body');
            const blockButtons = document.querySelectorAll('.button-block');

            // Sample data for the history. This would typically come from an API.
            const previousResults = [
                { date: '2025-09-08', am: '52', pm: '16' },
                { date: '2025-09-07', am: '04', pm: '93' },
                { date: '2025-09-06', am: '68', pm: '27' },
                { date: '2025-09-05', am: '45', pm: '72' },
                { date: '2025-09-04', am: '31', pm: '59' },
                { date: '2025-09-03', am: '80', pm: '14' },
                { date: '2025-09-02', am: '23', pm: '46' },
                
            ];

            // Function to update the current date
            const updateCurrentDate = () => {
                const now = new Date();
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                currentDateElement.textContent = now.toLocaleDateString('en-US', options);
            };

            // Function to update the history table
            const updateHistoryTable = () => {
                const tableBody = document.getElementById('history-table-body');
                tableBody.innerHTML = '';
                previousResults.forEach(result => {
                    const row = document.createElement('tr');
                    
                    let pmValue = result.pm;
                    if (result.date === '2025-09-08') {
                         pmValue = `1<span class="shining-digit highlighted-digit">6</span>`;
                    }
                    
                    row.innerHTML = `
                        <td>${result.date}</td>
                        <td>${result.am}</td>
                        <td>${pmValue}</td>
                    `;
                    tableBody.appendChild(row);
                });
            };

            // Function to display the numbers and a pop-up modal
            const showContent = (button) => {
                const buttonId = button.dataset.target;
                const numbers = getNumbersForButton(buttonId);
                const numbersHtml = numbers.map(num => `<span>${num}</span>`).join('');

                resultNumbers.innerHTML = numbersHtml;
                modalNumbers.innerHTML = numbersHtml;

                resultContainer.classList.add('active');
                modalOverlay.classList.remove('hidden');
            };

            // Function to handle the calculator logic
            let currentNumber = '0';
            let operator = null;
            let firstOperand = null;

            const updateDisplay = () => {
                // Not implemented in this example, but would update a display element
            };

            const clearCalculation = () => {
                currentNumber = '0';
                operator = null;
                firstOperand = null;
                updateDisplay();
            };

            // Logic to get numbers for each button
            const getNumbersForButton = (buttonId) => {
                // This is where you would put the logic to determine which numbers to show.
                // For this example, it's just a placeholder.
                const numberMap = {
                    'mwe-ga-nan': ['12', '34', '56'],
                    'one-kwet': ['78', '90'],
                    'shwe-pat-tee': ['11', '22', '33'],
                    'not-broken': ['44', '55'],
                    'one-chain': ['66', '77'],
                    'punch': ['88', '99'],
                };
                return numberMap[buttonId] || [];
            };

            // Handle button clicks
            blockButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const buttonId = button.dataset.target;
                    if (typeof Android !== "undefined" && Android.triggerRewardAd) {
                        Android.triggerRewardAd(buttonId);  // Pass buttonId to Kotlin
                    } else {
                        // Fallback for browser
                        showContent(button);
                    }
                });
            });

            // Event listeners for view switching
            calendarBtn.addEventListener('click', () => {
                luckyNumbersView.style.display = 'none';
                calendarView.style.display = 'block';
                calculatorPanel.style.display = 'flex';
                populateCalendarView();
                clearCalculation(); // Ensure a clean state when switching to the calculator
            });

            backToMainBtn.addEventListener('click', () => {
                calendarView.style.display = 'none';
                calculatorPanel.style.display = 'none';
                luckyNumbersView.style.display = 'flex';
                clearCalculation(); // Clear state when leaving the calendar view
            });
            
            // Initial setup on page load
            updateCurrentDate();
            updateHistoryTable();
        });
    </script>
</body>
</html>
